import { Mentor } from '../types';

export const MENTOR_DATABASE: Mentor[] = [
  {
    id: 'mentor-001',
    name: 'ဒေါ်ခင်ခင်မြင့်',
    jobTitle: 'Senior Software Engineer',
    company: 'KBZ Bank',
    industry: 'Banking & Finance',
    experience: '8 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['JavaScript', 'React', 'Node.js', 'Python', 'System Design'],
    availability: 'Available',
    bio: 'KBZ Bank တွင် Senior Software Engineer အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ နောက်ထပ်လူငယ်များကို နည်းပညာလောကသို့ လမ်းညွှန်ပေးရန် စိတ်ဝင်စားပါသည်။',
    email: 'khinkhing@example.com',
    linkedin: 'https://linkedin.com/in/khinkhing',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-002',
    name: 'ဦးမြင့်ကြည်',
    jobTitle: 'Data Scientist',
    company: 'MPT',
    industry: 'Telecommunications',
    experience: '6 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['Python', 'Machine Learning', 'Data Analysis', 'SQL', 'Statistics'],
    availability: 'Limited',
    bio: 'MPT တွင် Data Scientist အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ ဒေတာနှင့် AI လောကသို့ ဝင်ရောက်လိုသူများကို ကူညီပေးရန် ကြိုးစားနေပါသည်။',
    email: 'myintkyi@example.com',
    linkedin: 'https://linkedin.com/in/myintkyi',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-003',
    name: 'ဒေါ်နီလာမြင့်',
    jobTitle: 'UX/UI Designer',
    company: 'Wave Money',
    industry: 'Fintech',
    experience: '5 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['Figma', 'Adobe XD', 'User Research', 'Prototyping', 'Design Systems'],
    availability: 'Available',
    bio: 'Wave Money တွင် UX/UI Designer အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ ဒီဇိုင်းလောကသို့ ဝင်ရောက်လိုသူများကို လမ်းညွှန်ပေးရန် စိတ်ဝင်စားပါသည်။',
    email: 'nilar@example.com',
    linkedin: 'https://linkedin.com/in/nilar',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-004',
    name: 'ဦးအောင်ကိုကို',
    jobTitle: 'DevOps Engineer',
    company: 'CB Bank',
    industry: 'Banking & Finance',
    experience: '7 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['AWS', 'Docker', 'Kubernetes', 'CI/CD', 'Linux'],
    availability: 'Limited',
    bio: 'CB Bank တွင် DevOps Engineer အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ အင်ဖရာစထရက်ချာလောကသို့ ဝင်ရောက်လိုသူများကို ကူညီပေးရန် ကြိုးစားနေပါသည်။',
    email: 'aungko@example.com',
    linkedin: 'https://linkedin.com/in/aungko',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-005',
    name: 'ဒေါ်မြတ်သူမြတ်သာ',
    jobTitle: 'Product Manager',
    company: 'Ooredoo Myanmar',
    industry: 'Telecommunications',
    experience: '9 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['Product Strategy', 'Agile', 'User Stories', 'Roadmapping', 'Analytics'],
    availability: 'Available',
    bio: 'Ooredoo Myanmar တွင် Product Manager အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ ထုတ်ကုန်စီမံခန့်ခွဲမှုလောကသို့ ဝင်ရောက်လိုသူများကို လမ်းညွှန်ပေးရန် စိတ်ဝင်စားပါသည်။',
    email: 'mthumthidar@example.com',
    linkedin: 'https://linkedin.com/in/mthumthidar',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-006',
    name: 'ဦးသိမ်းကြည်',
    jobTitle: 'Cybersecurity Specialist',
    company: 'Myanmar Investment Commission',
    industry: 'Government',
    experience: '10 နှစ်',
    location: 'နေပြည်တော်',
    expertise: ['Network Security', 'Ethical Hacking', 'Risk Assessment', 'Compliance', 'Incident Response'],
    availability: 'Limited',
    bio: 'မြန်မာနိုင်ငံရင်းနှီးမြှုပ်နှံမှု ကော်မရှင်တွင် Cybersecurity Specialist အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ လုံခြုံရေးလောကသို့ ဝင်ရောက်လိုသူများကို ကူညီပေးရန် ကြိုးစားနေပါသည်။',
    email: 'thantkyi@example.com',
    linkedin: 'https://linkedin.com/in/thantkyi',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-007',
    name: 'ဒေါ်အေးအေးဝင်း',
    jobTitle: 'Mobile App Developer',
    company: 'Ayeyar Hinthar',
    industry: 'Media & Entertainment',
    experience: '6 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['React Native', 'Flutter', 'iOS Development', 'Android Development', 'Firebase'],
    availability: 'Available',
    bio: 'Ayeyar Hinthar တွင် Mobile App Developer အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ မိုဘိုင်းအက်ပ်ဖွံ့ဖြိုးတိုးတက်ရေးလောကသို့ ဝင်ရောက်လိုသူများကို လမ်းညွှန်ပေးရန် စိတ်ဝင်စားပါသည်။',
    email: 'aungaung@example.com',
    linkedin: 'https://linkedin.com/in/aungaung',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-008',
    name: 'ဦးကျော်ကျော်ထွန်း',
    jobTitle: 'Blockchain Developer',
    company: 'Independent',
    industry: 'Blockchain & Crypto',
    experience: '4 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['Solidity', 'Web3.js', 'Smart Contracts', 'Ethereum', 'DeFi'],
    availability: 'Available',
    bio: 'Blockchain နည်းပညာဖြင့် လုပ်ငန်းများစတင်နေပြီး၊ ဘလော့ခ်ချိန်းလောကသို့ ဝင်ရောက်လိုသူများကို ကူညီပေးရန် ကြိုးစားနေပါသည်။',
    email: 'kyawkyawtun@example.com',
    linkedin: 'https://linkedin.com/in/kyawkyawtun',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-009',
    name: 'ဒေါ်ခင်စန္ဒာမိုး',
    jobTitle: 'HR Manager',
    company: 'City Mart Holdings',
    industry: 'Retail',
    experience: '8 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['Talent Acquisition', 'Employee Development', 'Performance Management', 'HR Strategy', 'Leadership'],
    availability: 'Limited',
    bio: 'City Mart Holdings တွင် HR Manager အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ လူ့စွမ်းအားစီမံခန့်ခွဲမှုလောကသို့ ဝင်ရောက်လိုသူများကို လမ်းညွှန်ပေးရန် စိတ်ဝင်စားပါသည်။',
    email: 'khinsandar@example.com',
    linkedin: 'https://linkedin.com/in/khinsandar',
    matchScore: 0,
    matchedInterests: []
  },
  {
    id: 'mentor-010',
    name: 'ဦးဝင်းထွန်းအောင်',
    jobTitle: 'Cloud Architect',
    company: 'Global Technology Services',
    industry: 'IT Services',
    experience: '7 နှစ်',
    location: 'ရန်ကင်း',
    expertise: ['AWS', 'Azure', 'Google Cloud', 'Cloud Architecture', 'Microservices'],
    availability: 'Available',
    bio: 'Global Technology Services တွင် Cloud Architect အဖြစ် တာဝန်ထမ်းဆောင်နေပြီး၊ ကလောက်နည်းပညာလောကသို့ ဝင်ရောက်လိုသူများကို ကူညီပေးရန် ကြိုးစားနေပါသည်။',
    email: 'wintunaung@example.com',
    linkedin: 'https://linkedin.com/in/wintunaung',
    matchScore: 0,
    matchedInterests: []
  }
];

/**
 * Find matching mentors based on career guide and user interests
 * Uses a scoring algorithm to match mentors with relevant expertise
 */
export const findMatchingMentorsFromDatabase = (
  careerGuide: { jobTitle: string; requiredSkills: string[]; softSkills: string[] },
  userInterests: string
): Mentor[] => {
  const userInterestKeywords = userInterests.toLowerCase().split(/[,\s]+/);
  const requiredSkills = careerGuide.requiredSkills.map(skill => skill.toLowerCase());
  const softSkills = careerGuide.softSkills.map(skill => skill.toLowerCase());

  // Score each mentor based on matching criteria
  const scoredMentors = MENTOR_DATABASE.map(mentor => {
    let score = 0;
    const matchedInterests: string[] = [];

    // Check expertise matching with required skills (weight: 3)
    const mentorExpertise = mentor.expertise.map(exp => exp.toLowerCase());
    const skillMatches = requiredSkills.filter(skill =>
      mentorExpertise.some(exp => exp.includes(skill) || skill.includes(exp))
    );
    score += skillMatches.length * 3;
    matchedInterests.push(...skillMatches);

    // Check expertise matching with soft skills (weight: 2)
    const softSkillMatches = softSkills.filter(skill =>
      mentorExpertise.some(exp => exp.includes(skill) || skill.includes(exp))
    );
    score += softSkillMatches.length * 2;
    matchedInterests.push(...softSkillMatches);

    // Check user interests matching (weight: 1)
    const interestMatches = userInterestKeywords.filter(interest =>
      mentor.bio.toLowerCase().includes(interest) ||
      mentorExpertise.some(exp => exp.includes(interest))
    );
    score += interestMatches.length * 1;
    matchedInterests.push(...interestMatches);

    // Bonus for industry relevance (weight: 2)
    const jobTitleLower = careerGuide.jobTitle.toLowerCase();
    if (mentor.industry.toLowerCase().includes(jobTitleLower) ||
        jobTitleLower.includes(mentor.industry.toLowerCase())) {
      score += 2;
    }

    return {
      ...mentor,
      matchScore: Math.min(score, 100), // Cap at 100
      matchedInterests: [...new Set(matchedInterests)] // Remove duplicates
    };
  });

  // Sort by match score and return top 5
  return scoredMentors
    .sort((a, b) => b.matchScore - a.matchScore)
    .slice(0, 5)
    .filter(mentor => mentor.matchScore > 0); // Only return mentors with some match
};
